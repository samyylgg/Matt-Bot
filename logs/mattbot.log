#!/bin/bash
# Script avanzado para Matt-Bot en Termux

LOG_DIR="./logs"
LOG_FILE="$LOG_DIR/mattbot.log"

echo "ðŸ§¹ Limpiando node_modules y cache..."
rm -rf node_modules package-lock.json
npm cache clean --force

echo "ðŸ“¦ Instalando dependencias..."
npm install

# Crear carpeta logs si no existe
if [ ! -d "$LOG_DIR" ]; then
  mkdir "$LOG_DIR"
fi

echo "ðŸš€ Iniciando Matt-Bot con nodemon (logs en $LOG_FILE)..."
# Ejecuta nodemon, redirigiendo stdout y stderr a log
nodemon index.js >> "$LOG_FILE" 2>&1
